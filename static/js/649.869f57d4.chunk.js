"use strict";(self.webpackChunkmy_films=self.webpackChunkmy_films||[]).push([[649],{6649:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var i,r,l,o,a,s=n(7990),m={modalDivFilmFormActive:"FilmForm_modalDivFilmFormActive__pKO60",divForMiniFilmForm:"FilmForm_divForMiniFilmForm__3pJ8m",firstDivFilmFormActive:"FilmForm_firstDivFilmFormActive__wmcob",buttonAddMiniFilmForm:"FilmForm_buttonAddMiniFilmForm__+NxaX",divForMiniFilmFormHover:"FilmForm_divForMiniFilmFormHover__xdO00",firstDivFilmForm:"FilmForm_firstDivFilmForm__6lZUu",divFilmForm:"FilmForm_divFilmForm__piukv",formFilmForm:"FilmForm_formFilmForm__uSQ6o",labelFilmForm:"FilmForm_labelFilmForm__Hm3xl",inputFilmForm:"FilmForm_inputFilmForm__W3gam",buttonFilmForm:"FilmForm_buttonFilmForm__mGC97",nameInputFilmForm:"FilmForm_nameInputFilmForm__uWtGI"},c=n(4420),d=n(2580),u=n(2791),h=n(184),f=function(){var e=(0,c.I0)(),t=(0,c.v9)(d.KE).map((function(e){return e.name}));var n=function(e){"Escape"===e.key&&i()},i=function e(t){var i=document.querySelector(".modalDivFilmForm"),r=document.querySelector(".firstDivFilmForm"),l=document.querySelectorAll(".inputsAdd");function o(){i.removeEventListener("click",e),document.removeEventListener("keydown",n),l.forEach((function(e){return e.blur()})),i.classList.remove(m.modalDivFilmFormActive),r.classList.remove(m.firstDivFilmFormActive)}t?t.target.classList.contains(m.modalDivFilmFormActive)&&o():o()};return(0,u.useEffect)((function(){var e=document.querySelector(".divForMiniFilmForm"),t=document.querySelector(".firstDivFilmForm"),n=document.querySelector(".labelFilter");e.addEventListener("mouseenter",(function(){t.classList.add(m.divForMiniFilmFormHover),n&&(n.style.marginRight="155px")})),e.addEventListener("mouseleave",(function(){t.classList.remove(m.divForMiniFilmFormHover),n&&(n.style.marginRight="130px")}))})),(0,h.jsx)("div",{className:[m.modalDivFilmForm,"modalDivFilmForm"].join(" "),children:(0,h.jsxs)("div",{className:[m.firstDivFilmForm,"firstDivFilmForm"].join(" "),children:[(0,h.jsx)("div",{className:[m.divForMiniFilmForm,"divForMiniFilmForm"].join(" "),children:(0,h.jsx)("button",{className:m.buttonAddMiniFilmForm,type:"button",onClick:function(){var e=document.querySelector(".modalDivFilmForm"),t=document.querySelector(".firstDivFilmForm"),r=document.querySelector(".inputNameAdd");e.classList.add(m.modalDivFilmFormActive),t.classList.add(m.firstDivFilmFormActive),setTimeout((function(){r.focus()}),100),e.addEventListener("click",i),document.addEventListener("keydown",n)},children:"Add"})}),(0,h.jsx)("div",{className:m.divFilmForm,children:(0,h.jsxs)("form",{className:m.formFilmForm,onSubmit:function(n){n.preventDefault();var r=n.currentTarget.elements.name.value;if(t.some((function(e){return e.toLowerCase()===r.toLowerCase()})))alert("".concat(r," is already in films."));else{var l=n.currentTarget.elements.number.value,o={name:r,number:l};e((0,s.oH)(o)),n.currentTarget.reset(),i()}},children:[(0,h.jsxs)("label",{className:m.labelFilmForm,children:[(0,h.jsx)("span",{className:m.nameInputFilmForm,children:"Name"}),(0,h.jsx)("input",{className:[m.inputFilmForm,"inputNameAdd","inputsAdd"].join(" "),type:"text",name:"name",required:!0})]}),(0,h.jsxs)("label",{className:m.labelFilmForm,children:[(0,h.jsx)("span",{className:m.nameInputFilmForm,children:"Number"}),(0,h.jsx)("input",{className:[m.inputFilmForm,"inputsAdd"].join(" "),type:"tel",name:"number",required:!0})]}),(0,h.jsx)("button",{className:m.buttonFilmForm,type:"submit",children:"Add new film"})]})})]})})},F=n(9439),v={labelFilter:"Filter_labelFilter__7SBy1",inputFilter:"Filter_inputFilter__8QMOp"},p=n(1473),g=function(){var e=(0,c.v9)(d.AD),t=(0,c.I0)(),n=(0,u.useState)(""),i=(0,F.Z)(n,2),r=i[0],l=i[1];return(0,u.useEffect)((function(){var e=window.innerWidth;l(e>465?"Please start typing the desired name":e<=465&&e>370?"Please start typing name":"Type name")}),[]),(0,h.jsx)("label",{className:[v.labelFilter,"labelFilter"].join(" "),children:(0,h.jsx)("input",{value:e,className:v.inputFilter,type:"text",name:"filter",placeholder:r,onChange:function(e){e.preventDefault();var n=e.target.value;t((0,p.T)(n))}})})},x={allDivFilmList:"Styles_allDivFilmList__XUI95",divForFilmList:"Styles_divForFilmList__G7Tyo",listFilms:"Styles_listFilms__AYhmo",itemFilm:"Styles_itemFilm__+Dnxk",itemFilmActive:"Styles_itemFilmActive__znSKh",firstDivItemFilm:"Styles_firstDivItemFilm__xWC8B",divItemFilm:"Styles_divItemFilm__IV0CE",divInfoItemFilms:"Styles_divInfoItemFilms__CWndJ",hItemFilmsName:"Styles_hItemFilmsName__Rg9x4",pItemFilmsNumber:"Styles_pItemFilmsNumber__HFPPs",buttonFav:"Styles_buttonFav__h0-uQ",notFavBut:"Styles_notFavBut__l2Zp5",isFavBut:"Styles_isFavBut__mZ3Gm"},y=function(e){var t=e.film,n=(e.index,e.id),i=e.activeId,r=(0,c.I0)(),l=(0,c.v9)(d.D5),o=(0,u.useRef)(null),a=(0,u.useRef)(null),m=(0,u.useRef)(null),f=(0,u.useRef)(null),F=(0,u.useRef)(null);return(0,u.useEffect)((function(){var e=l<=1e3?l:1e3;if(o.current&&a.current&&m.current&&f.current&&F.current){var t=o.current,n=a.current,i=m.current,r=f.current,s=F.current;t.style.borderRadius=e/88+"px",n.style.borderRadius=e/88+"px",n.style.textShadow=e/500+"px "+e/500+"px "+e/200+"px black",n.style.padding=e/100+"px",i.style.right=e/44+"px",i.style.width=e/40+"px",i.style.height=e/40+"px",r.style.fontSize=e/76+"px",s.style.marginTop=e/8+"px"}}),[i,n,l]),(0,h.jsx)("div",{ref:o,className:[x.firstDivItemFilm,"firstDivItemFilm"].join(" "),style:{backgroundImage:"url(".concat(t.image,")"),backgroundSize:"cover",backgroundPosition:"center"},children:(0,h.jsxs)("div",{ref:a,className:[x.divItemFilm,"divItemFilm"].join(" "),children:[(0,h.jsxs)("div",{ref:F,className:x.divInfoItemFilms,children:[(0,h.jsx)("h2",{className:x.hItemFilmsName,children:t.title}),(0,h.jsxs)("div",{ref:f,children:[(0,h.jsxs)("p",{className:x.pItemFilmsNumber,children:["Rating: ",t.rating]}),(0,h.jsxs)("p",{className:x.pItemFilmsNumber,children:["Release date: ",function(e){var t=new Date(e),n=t.getDate().toString().padStart(2,"0"),i=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return"".concat(n,".").concat(i,".").concat(r)}(t.release_date)]})]})]}),(0,h.jsx)("button",{ref:m,type:"button",className:[x.buttonFav,t.favorite?x.isFavBut:x.notFavBut,"buttonFav"].join(" "),onClick:function(){t.favorite?r((0,s.qp)({id:t._id,favorite:!1})):r((0,s.qp)({id:t._id,favorite:!0}))},children:"Favorite"})]})})},_="ActiveItemFilm_allDivActItFilm__QwJY6",w="ActiveItemFilm_imgActItFilm__PSI07",C="ActiveItemFilm_buttonDelete__W3Qzy",b="ActiveItemFilm_changeCBut__WdFqA",j={formChangingCWindow:"ChangingCWindow_formChangingCWindow__Ly6Lz",labelChangingCWindow:"ChangingCWindow_labelChangingCWindow__8hyzk",inputChangingCWindow:"ChangingCWindow_inputChangingCWindow__U+AvV",buttonsChangingCWindow:"ChangingCWindow_buttonsChangingCWindow__CIoc1",buttonChangingCWindow:"ChangingCWindow_buttonChangingCWindow__QQGd6"},S=n(781),W=function(e){var t=e.closeChangingCWindow,n=e.name,i=e.number,r=e.id,l=(0,c.I0)();return(0,u.useEffect)((function(){var e=2,t=window.innerWidth,n=t<=1e3?t:1e3;n<800&&(e=1.5);var i=document.querySelectorAll(".nameInputChangingCWindow"),r=document.querySelectorAll(".inputChangingCWindow"),l=document.querySelector(".buttonsChangingCWindow"),o=document.querySelectorAll(".buttonChangingCWindow"),a=document.querySelectorAll(".labelChangingCWindow"),s=document.querySelector(".formChangingCWindow");i&&r&&l&&o&&a&&s&&(i.forEach((function(t){return t.style.fontSize=n/(21*e)+"px"})),r.forEach((function(t){t.style.width=n/(1.666667*e)+"px",t.style.height=n/(12.5*e)+"px",t.style.borderRadius=n/(50*e)+"px",t.style.fontSize=n/(25*e)+"px",t.style.paddingLeft=n/(50*e)+"px",t.style.paddingRight=n/(50*e)+"px",t.style.borderWidth=n/(500*e)+"px"})),l.style.width=n/(1.666667*e)+"px",o.forEach((function(t){t.style.height=n/(16.66667*e)+"px",t.style.borderRadius=n/(100*e)+"px",t.style.fontSize=n/(35.7*e)+"px"})),a.forEach((function(t){return t.style.gap=n/(50*e)+"px"})),s.style.gap=n/(25*e)+"px",s.style.borderRadius=n/(25*e)+"px")}),[]),(0,h.jsxs)("form",{className:[j.formChangingCWindow,"formChangingCWindow"].join(" "),onSubmit:function(e){e.preventDefault();var o=e.currentTarget.elements.name.value,a=r,m=e.currentTarget.elements.number.value,c={id:a,name:o,number:m};if(n!==o||i!==m){l((0,s.hA)(c)),e.currentTarget.reset();var d=document.querySelector(".listFilmsForGap").scrollLeft;l((0,S.B)(d))}else t()},children:[(0,h.jsxs)("label",{className:[j.labelChangingCWindow,"labelChangingCWindow"].join(" "),children:[(0,h.jsx)("span",{className:[j.nameInputChangingCWindow,"nameInputChangingCWindow"].join(" "),children:"Name"}),(0,h.jsx)("input",{className:[j.inputChangingCWindow,"inputChangingCWindow"].join(" "),defaultValue:n,type:"text",name:"name",required:!0})]}),(0,h.jsxs)("label",{className:[j.labelChangingCWindow,"labelChangingCWindow"].join(" "),children:[(0,h.jsx)("span",{className:[j.nameInputChangingCWindow,"nameInputChangingCWindow"].join(" "),children:"Number"}),(0,h.jsx)("input",{className:[j.inputChangingCWindow,"inputChangingCWindow"].join(" "),defaultValue:i,type:"tel",name:"number",required:!0})]}),(0,h.jsxs)("div",{className:[j.buttonsChangingCWindow,"buttonsChangingCWindow"].join(" "),children:[(0,h.jsx)("button",{className:[j.buttonChangingCWindow,"buttonChangingCWindow"].join(" "),type:"button",onClick:t,children:"Changen't film"}),(0,h.jsx)("button",{className:[j.buttonChangingCWindow,"buttonChangingCWindow"].join(" "),type:"submit",children:"Change film"})]})]})},N=n(7392),A=function(e){var t=e.film,n=(0,c.I0)(),i=(0,c.v9)(d.D5),r=(0,u.useState)(!1),l=(0,F.Z)(r,2),o=l[0],a=l[1],m=(0,u.useRef)(null),f=(0,u.useRef)(null),v=(0,u.useRef)(null),p=(0,u.useRef)(null);return(0,u.useEffect)((function(){var e=i<=1e3?i:1e3,t=2.3;if(m.current&&f.current&&v.current&&p.current){var n=m.current,r=f.current,l=v.current,o=p.current;n.style.borderRadius=e/(44*t)+"px",r.style.borderRadius="".concat(e/(44*t),"px ").concat(e/(44*t),"px 0 0"),l.style.top=e/(22*t)+"px",l.style.left=e/(22*t)+"px",o.style.top=e/(22*t)+"px",o.style.right=e/(22*t)+"px",o.style.width=e/29.9+"px",o.style.height=e/29.9+"px",l.style.width=e/29.9+"px",l.style.height=e/29.9+"px"}})),(0,h.jsxs)("div",{ref:m,className:_,children:[(0,h.jsx)("img",{ref:f,className:w,src:"".concat(t.image),alt:"".concat(t.title)}),(0,h.jsx)("button",{ref:p,id:t._id,className:C,type:"button",onClick:function(){var e=t._id;n((0,s.wQ)(e)),n((0,N.U7)());var i=document.querySelector(".listFilmsForGap").scrollLeft;n((0,S.B)(i))},children:"Delete"}),(0,h.jsx)("button",{ref:v,type:"button",className:b,onClick:function(){setTimeout((function(){a(!0)}),400)},children:"Change contact"}),o&&(0,h.jsx)(W,{closeChangingCWindow:function(){a(!1)},name:t.title,number:t.rating,id:t._id})]})},I=n(1087),L=n(7689),D=n(3433),E=n(168),R=n(7924),k=(0,R.F4)(i||(i=(0,E.Z)(["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]))),q=R.ZP.div(r||(r=(0,E.Z)(["\nposition: absolute;\ntop: 50%;\nleft: 50%;\n"]))),Z=R.ZP.div(l||(l=(0,E.Z)(["\n  display: inline-block;\n  position: relative;\n  width: 80px;\n  height: 80px;\n"]))),B=R.ZP.div(o||(o=(0,E.Z)(["\n  animation: ",' 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n  transform-origin: 40px 40px;\n\n  &:after {\n    content: " ";\n    display: block;\n    position: absolute;\n    width: 7px;\n    height: 7px;\n    border-radius: 50%;\n    background: #000;\n    margin: -4px 0 0 -4px;\n  }\n'])),k),z=(0,R.ZP)(B)(a||(a=(0,E.Z)(["\n  &:nth-child(1) {\n    animation-delay: -0.036s;\n    &:after {\n      top: 63px;\n      left: 63px;\n    }\n  }\n  &:nth-child(2) {\n    animation-delay: -0.072s;\n    &:after {\n      top: 68px;\n      left: 56px;\n    }\n  }\n  &:nth-child(3) {\n    animation-delay: -0.108s;\n    &:after {\n      top: 71px;\n      left: 48px;\n    }\n  }\n  &:nth-child(4) {\n    animation-delay: -0.144s;\n    &:after {\n      top: 72px;\n      left: 40px;\n    }\n  }\n  &:nth-child(5) {\n    animation-delay: -0.18s;\n    &:after {\n      top: 71px;\n      left: 32px;\n    }\n  }\n  &:nth-child(6) {\n    animation-delay: -0.216s;\n    &:after {\n      top: 68px;\n      left: 24px;\n    }\n  }\n  &:nth-child(7) {\n    animation-delay: -0.252s;\n    &:after {\n      top: 63px;\n      left: 17px;\n    }\n  }\n  &:nth-child(8) {\n    animation-delay: -0.288s;\n    &:after {\n      top: 56px;\n      left: 12px;\n    }\n  }\n"]))),M=function(){return(0,h.jsx)(q,{children:(0,h.jsx)(Z,{children:(0,D.Z)(Array(8)).map((function(e,t){return(0,h.jsx)(z,{},t)}))})})},T=function(){var e=(0,c.I0)(),t=(0,c.v9)(d.KE),n=(0,u.useState)(t),i=(0,F.Z)(n,2),r=i[0],l=i[1],o=(0,c.v9)(d.AD),a=(0,c.v9)(d.yS),s=(0,c.v9)(d.D5),m=(0,u.useState)(null),f=(0,F.Z)(m,2),v=f[0],p=f[1],g=(0,u.useRef)(!1),_=(0,u.useRef)([]),w=(0,u.useRef)([]),C=(0,u.useRef)(null);return(0,u.useEffect)((function(){a>0&&C.current&&(setTimeout((function(){C.current.scrollLeft=a}),100),e((0,S.B)(0)))}),[a,e]),(0,u.useEffect)((function(){var e=C.current,t=w.current,n=_.current,i=document.querySelector(".listFilmsForGap"),r=3.2,l=window.innerWidth,o=l<=1e3?l:1e3;if(o&&n.length>0){n.forEach((function(e){e.style.height=o/r+"px",e.style.minWidth=o/(1.667*r)+"px",e.style.fontSize=o/(19*r)+"px",e.style.borderRadius=o/70.4+"px",p(null)})),i.style.gap=o/32+"px";var a=function(){n.length>0&&n.forEach((function(e){return c(e,l)}))};!g.current&&e&&n&&(g.current=!0,e.addEventListener("scroll",a));var s=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(l=window.innerWidth,(o=l<=1e3?l:1e3)&&n.length>0){var s=n.filter((function(e){return e.getAttribute("id")!==t.getAttribute("id")}));s.forEach((function(e){e.style.height=o/r+"px",e.style.minWidth=o/(1.667*r)+"px",e.style.fontSize=o/(19*r)+"px",e.style.borderRadius=o/140.8+"px",e.classList.remove(x.iFilmActive)})),t.style.height=o/r*1.4+"px",t.style.minWidth=o/(1.667*r)*1.4+"px",t.style.fontSize=o/(19*r)*1.4+"px",t.style.borderRadius=o/140.8*1.4+"px",t.classList.add(x.iFilmActive),p(t.getAttribute("id"));var m=C.current.scrollLeft;C.current.style.scrollBehavior="smooth",0!==i&&(C.current.scrollLeft=m+i),setTimeout((function(){e&&e.addEventListener("scroll",a)}),500)}},m=function(t,n,i){if(!t.target.classList.contains("buttonFav")){e&&e.removeEventListener("scroll",a);var r=n.getBoundingClientRect(),l=C.current.getBoundingClientRect(),o=260,m=60;if(i>=1e3?(o=100,m=100):i<1e3&&i>=900?(o=95,m=95):i<900&&i>=800?(o=85,m=85):i<800&&i>=750?(o=77,m=77):i<750&&i>=700?(o=73,m=73):i<700&&i>=650?(o=67,m=67):i<650&&i>=600?(o=62,m=62):i<600&&i>=550?(o=58,m=58):i<550&&i>=500?(o=51,m=51):i<500&&i>=450?(o=58,m=58):i<450&&i>=400?(o=51,m=51):i<400&&i>=350?(o=46,m=46):i<350&&(o=36,m=36),r.x<l.x+l.width/2){var c=0-l.width/2+r.x+o;s(n,c)}else{var d=0-l.width/2+r.x+m;s(n,d)}}};n.forEach((function(n){var i=n.getAttribute("id");!t.includes(i)&&e&&(n.addEventListener("click",(function(e){return m(e,n,l)})),t.push(i))}));var c=function(e,t){var n=e.getBoundingClientRect(),i=C.current.getBoundingClientRect(),r=i.x+i.width/2-n.width/2+50-170,l=i.x+i.width/2+n.width/2-50-170,o=100;if(t<=1e3&&t>900?(r=i.x+i.width/2-n.width/2+50-100,l=i.x+i.width/2+n.width/2-50-100,o=90):t<=900&&t>800?(r=i.x+i.width/2-n.width/2+50-100,l=i.x+i.width/2+n.width/2-50-100,o=80):t<=800&&t>700?(r=i.x+i.width/2-n.width/2+50-100,l=i.x+i.width/2+n.width/2-50-100,o=70):t<=700&&t>600?(r=i.x+i.width/2-n.width/2+50-80,l=i.x+i.width/2+n.width/2-50-80,o=60):t<=600&&t>500?(r=i.x+i.width/2-n.width/2+20-50,l=i.x+i.width/2+n.width/2-20-50,o=50):t<=500&&t>400?(r=i.x+i.width/2-n.width/2+20-50,l=i.x+i.width/2+n.width/2-20-50,o=40):t<=400&&(r=i.x+i.width/2-n.width/2+20-50,l=i.x+i.width/2+n.width/2-20-50,o=30),n.x>r&&n.x<i.x+i.width/2&&!e.classList.contains(x.itemContactActive)){var a=0-n.width/2+o;s(e,a)}else if(n.x>i.x+i.width/2&&n.x<l&&!e.classList.contains(x.itemContactActive)){var m=0+n.width/2-100;s(e,m)}};return function(){o=null,e&&(g.current=!1,e.removeEventListener("scroll",a)),n.length>0&&(n.forEach((function(e){e.removeEventListener("click",(function(){return m(e,l)}))})),w.current=[])}}}),[r,s]),(0,u.useEffect)((function(){_.current=[],o.length>0?l(t.filter((function(e){return e.title.toLowerCase().includes(o.toLowerCase())}))):l(t)}),[o,t]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("ul",{ref:C,className:[x.listFilms,"listFilmsForGap"].join(" "),children:0===r.length&&0===o.length?(0,h.jsx)("h2",{children:"Right now you don't have any films."}):0!==r.length?r.map((function(e){return(0,h.jsx)("li",{ref:function(e){null===e||_.current.some((function(t){return t.getAttribute("id")===e.getAttribute("id")}))||_.current.push(e)},id:e._id,className:[x.itemContact,"itemContact"].join(" "),children:(0,h.jsx)(I.rU,{to:"/films/".concat(e._id),children:v===e._id?(0,h.jsx)(A,{film:e}):(0,h.jsx)(y,{film:e,index:r.indexOf(e),id:e._id,activeId:v})})},e._id)})):(0,h.jsx)("h2",{children:"Not found any films that meet the search criteria."})}),(0,h.jsx)(u.Suspense,{fallback:(0,h.jsx)(M,{}),children:(0,h.jsx)(L.j3,{})})]})},P=n(8992),G=n(5294),U=function(){var e=window.innerWidth,t=(0,c.v9)(P.rK),n=(0,c.I0)(),i=(0,c.v9)(d.xU),r=(0,c.v9)(d.zh);(0,u.useEffect)((function(){t&&(G.Z.defaults.headers.common.Authorization="Bearer ".concat(t),n((0,s.cu)()))}),[n,t]);var l=20;return l=e>1e3?50:e>500&&e<=1e3?e/20:e/40,(0,h.jsx)("div",{className:[x.allDivFilmList,"allDivFilmList"].join(" "),children:r?(0,h.jsx)("h2",{children:"Oopsss...Something went wrong..."}):(0,h.jsx)("div",{id:"divForFilmList",className:x.divForFilmList,style:{paddingLeft:l,paddingRight:l},children:i&&!r?(0,h.jsx)(M,{}):(0,h.jsx)(T,{})})})},Q=n(4751),H="PageUsers_divContFiltPageUsers__JZL5M",K=function(){var e=(0,c.I0)(),t=(0,c.v9)(P.rK),n=new URLSearchParams(window.location.search).get("token");return(0,u.useEffect)((function(){n?(G.Z.defaults.headers.common.Authorization="Bearer ".concat(n),e((0,Q.o4)(n))):t&&(G.Z.defaults.headers.common.Authorization="Bearer ".concat(t))})),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:H,children:[(0,h.jsx)(g,{}),(0,h.jsx)(f,{})]}),(0,h.jsx)(U,{})]})}}}]);
//# sourceMappingURL=649.869f57d4.chunk.js.map